<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Анализ данных - Газпром</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        .analysis-trainer {
            max-width: 1000px;
            margin: 2rem auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 2rem;
        }
        
        .trainer-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .trainer-header h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        
        .data-table-container {
            overflow-x: auto;
            margin-bottom: 2rem;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
        }
        
        .data-table th, .data-table td {
            border: 1px solid var(--gray);
            padding: 0.75rem;
            text-align: center;
        }
        
        .data-table th {
            background-color: var(--light-gray);
            font-weight: 500;
        }
        
        .data-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .question-container {
            background-color: var(--light-gray);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .question-text {
            font-weight: 500;
            margin-bottom: 1rem;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        @media (max-width: 600px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }
        
        .option {
            padding: 1rem;
            background-color: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid var(--gray);
        }
        
        .option:hover {
            border-color: var(--primary-color);
        }
        
        .option.selected {
            background-color: var(--primary-light);
            border-color: var(--primary-color);
        }
        
        .option.correct {
            background-color: #e6ffed;
            border-color: #4CAF50;
        }
        
        .option.incorrect {
            background-color: #ffebee;
            border-color: #f44336;
        }
        
        .feedback {
            padding: 1rem;
            border-radius: 6px;
            margin-top: 1rem;
            display: none;
        }
        
        .feedback.correct {
            background-color: #e6ffed;
            color: #2e7d32;
            display: block;
        }
        
        .feedback.incorrect {
            background-color: #ffebee;
            color: #c62828;
            display: block;
        }
        
        .btn-container {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
        }
        
        .progress-container {
            margin-top: 1.5rem;
        }
        
        .progress-bar {
            height: 8px;
            background-color: var(--gray);
            border-radius: 4px;
            margin-bottom: 0.5rem;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s;
        }
        
        .progress-text {
            text-align: center;
            font-size: 0.9rem;
            color: var(--text-light);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-container">
                <div class="logo">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Gazprom_logo.svg/1200px-Gazprom_logo.svg.png" alt="Газпром" class="logo-img">
                    <div class="logo-text">
                        <span class="logo-title">Газпром</span>
                        <span class="logo-subtitle">Анализ данных</span>
                    </div>
                </div>
                
                <nav class="main-nav">
                    <ul class="nav-list">
                        <li class="nav-item"><a href="../index.html" class="nav-link">Главная</a></li>
                        <li class="nav-item"><a href="../office-tools/index.html" class="nav-link">Инструменты</a></li>
                        <li class="nav-item"><a href="index.html" class="nav-link active">Тренажёры</a></li>
                        <li class="nav-item"><a href="../visualization/index.html" class="nav-link">Аналитика</a></li>
                        <li class="nav-item"><a href="../ai-assistant/index.html" class="nav-link">Помощник</a></li>
                    </ul>
                </nav>
                
                <button class="mobile-menu-btn">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <div class="analysis-trainer">
                <div class="trainer-header">
                    <h2>Тренажёр анализа данных</h2>
                    <p>Научитесь анализировать данные и принимать решения на их основе</p>
                </div>
                
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="progress"></div>
                    </div>
                    <div class="progress-text" id="progress-text">Вопрос 1 из 5</div>
                </div>
                
                <div class="data-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Регион</th>
                                <th>Добыча газа, млн м³</th>
                                <th>Добыча нефти, тыс. т</th>
                                <th>Численность персонала</th>
                                <th>Инвестиции, млн руб.</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Ямало-Ненецкий АО</td>
                                <td>320</td>
                                <td>450</td>
                                <td>1250</td>
                                <td>8500</td>
                            </tr>
                            <tr>
                                <td>Ханты-Мансийский АО</td>
                                <td>280</td>
                                <td>680</td>
                                <td>980</td>
                                <td>7200</td>
                            </tr>
                            <tr>
                                <td>Краснодарский край</td>
                                <td>150</td>
                                <td>320</td>
                                <td>750</td>
                                <td>4500</td>
                            </tr>
                            <tr>
                                <td>Оренбургская область</td>
                                <td>190</td>
                                <td>280</td>
                                <td>820</td>
                                <td>5800</td>
                            </tr>
                            <tr>
                                <td>Республика Коми</td>
                                <td>210</td>
                                <td>390</td>
                                <td>670</td>
                                <td>5100</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="question-container" id="question-container">
                    <!-- Вопросы будут загружаться здесь -->
                </div>
                
                <div class="btn-container">
                    <button onclick="prevQuestion()" class="btn" id="prev-btn" disabled>Назад</button>
                    <button onclick="nextQuestion()" class="btn btn-primary" id="next-btn">Далее</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-bottom">
                <p>© 2025 ПАО "Газпром". Все права защищены.</p>
            </div>
        </div>
    </footer>

    <script src="../script.js"></script>
    <script>
        const questions = [
            {
                question: "В каком регионе добыча газа на одного сотрудника наибольшая?",
                options: [
                    "Ямало-Ненецкий АО",
                    "Ханты-Мансийский АО",
                    "Краснодарский край",
                    "Оренбургская область"
                ],
                correctAnswer: 0,
                feedback: "Правильно! В Ямало-Ненецком АО добыча газа на одного сотрудника составляет примерно 256 тыс. м³, что больше, чем в других регионах."
            },
            {
                question: "Какой регион имеет наименьшие инвестиции на тонну добытой нефти?",
                options: [
                    "Ханты-Мансийский АО",
                    "Республика Коми",
                    "Оренбургская область",
                    "Краснодарский край"
                ],
                correctAnswer: 0,
                feedback: "Правильно! В Ханты-Мансийском АО инвестиции на тонну нефти составляют около 10.6 тыс. руб., что меньше, чем в других регионах."
            },
            {
                question: "Если бы вам нужно было увеличить добычу газа с минимальными затратами на персонал, какой регион вы бы выбрали для инвестиций?",
                options: [
                    "Оренбургская область",
                    "Ямало-Ненецкий АО",
                    "Республика Коми",
                    "Краснодарский край"
                ],
                correctAnswer: 2,
                feedback: "Правильно! Республика Коми имеет хороший показатель добычи газа на одного сотрудника (313 тыс. м³) при относительно невысоких инвестициях."
            },
            {
                question: "Какой вывод можно сделать из данных таблицы?",
                options: [
                    "Регионы с большей добычей нефти имеют меньшую добычу газа",
                    "Численность персонала прямо пропорциональна объёму инвестиций",
                    "Регионы с большей добычей газа получают больше инвестиций",
                    "Нет явной зависимости между добычей нефти и газа"
                ],
                correctAnswer: 2,
                feedback: "Правильно! Данные показывают, что регионы с большей добычей газа (Ямало-Ненецкий и Ханты-Мансийский АО) получают больше инвестиций."
            },
            {
                question: "Если бюджет на инвестиции сократится на 20%, в каком регионе это окажет наименьшее влияние на добычу?",
                options: [
                    "Краснодарский край",
                    "Оренбургская область",
                    "Республика Коми",
                    "Ханты-Мансийский АО"
                ],
                correctAnswer: 0,
                feedback: "Правильно! Краснодарский край уже имеет наименьшие инвестиции на единицу добычи, поэтому сокращение окажет там наименьшее влияние."
            }
        ];
        
        let currentQuestion = 0;
        let userAnswers = new Array(questions.length);
        
        function loadQuestion() {
            const question = questions[currentQuestion];
            const container = document.getElementById('question-container');
            
            container.innerHTML = `
                <div class="question-text">${currentQuestion + 1}. ${question.question}</div>
                <div class="options-container" id="options-container">
                    ${question.options.map((option, index) => `
                        <div class="option" data-answer="${index}" onclick="selectAnswer(${index})">
                            ${option}
                        </div>
                    `).join('')}
                </div>
                <div class="feedback" id="feedback"></div>
            `;
            
            // Восстановление выбранного ответа, если он есть
            if (userAnswers[currentQuestion] !== undefined) {
                selectAnswer(userAnswers[currentQuestion]);
            }
            
            // Обновление прогресса
            document.getElementById('progress').style.width = `${(currentQuestion / questions.length) * 100}%`;
            document.getElementById('progress-text').textContent = `Вопрос ${currentQuestion + 1} из ${questions.length}`;
            
            // Обновление кнопок
            document.getElementById('prev-btn').disabled = currentQuestion === 0;
            document.getElementById('next-btn').textContent = currentQuestion === questions.length - 1 ? 'Завершить' : 'Далее';
        }
        
        function selectAnswer(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            
            options[index].classList.add('selected');
            userAnswers[currentQuestion] = index;
            
            // Показываем фидбэк, если вопрос уже был отвечен
            if (userAnswers[currentQuestion] !== undefined) {
                showFeedback();
            }
        }
        
        function showFeedback() {
            const question = questions[currentQuestion];
            const feedback = document.getElementById('feedback');
            const options = document.querySelectorAll('.option');
            
            if (userAnswers[currentQuestion] === question.correctAnswer) {
                feedback.textContent = question.feedback;
                feedback.className = 'feedback correct';
                options[userAnswers[currentQuestion]].classList.add('correct');
            } else if (userAnswers[currentQuestion] !== undefined) {
                feedback.textContent = question.feedback;
                feedback.className = 'feedback incorrect';
                options[userAnswers[currentQuestion]].classList.add('incorrect');
                options[question.correctAnswer].classList.add('correct');
            }
        }
        
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                loadQuestion();
            } else {
                showResults();
            }
        }
        
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            }
        }
        
        function showResults() {
            const correctAnswers = userAnswers.reduce((acc, answer, index) => {
                return acc + (answer === questions[index].correctAnswer ? 1 : 0);
            }, 0);
            
            const percentage = Math.round((correctAnswers / questions.length) * 100);
            
            document.getElementById('question-container').innerHTML = `
                <div style="text-align: center;">
                    <h3>Тест завершён!</h3>
                    <p>Вы ответили правильно на ${correctAnswers} из ${questions.length} вопросов.</p>
                    <div style="font-size: 2rem; font-weight: bold; color: var(--primary-color); margin: 1rem 0;">${percentage}%</div>
                    
                    <div style="background-color: #f5f5f5; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
                        ${percentage >= 80 ? 
                            'Отличный результат! Вы хорошо умеете анализировать данные.' : 
                            percentage >= 50 ? 
                            'Хороший результат, но есть куда расти. Рекомендуем больше практиковаться.' : 
                            'Попробуйте ещё раз и внимательнее анализируйте данные.'}
                    </div>
                    
                    <button onclick="restartTest()" class="btn btn-primary">Пройти тест снова</button>
                </div>
            `;
            
            document.getElementById('prev-btn').style.display = 'none';
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('progress').style.width = '100%';
        }
        
        function restartTest() {
            currentQuestion = 0;
            userAnswers = new Array(questions.length);
            loadQuestion();
            
            document.getElementById('prev-btn').style.display = 'block';
            document.getElementById('next-btn').style.display = 'block';
            document.getElementById('prev-btn').disabled = true;
            document.getElementById('next-btn').textContent = 'Далее';
        }
        
        // Инициализация
        document.addEventListener('DOMContentLoaded', loadQuestion);
    </script>
</body>
</html>