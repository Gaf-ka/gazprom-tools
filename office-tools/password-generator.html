<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π - –ì–∞–∑–ø—Ä–æ–º</title>
    <link rel="stylesheet" href="../style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .generator-section {
            padding: 40px 0;
        }
        
        .generator-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .generator-box {
            background-color: var(--white);
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        .generator-title {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--primary-dark);
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .form-row {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .password-result {
            background-color: #f8f8f8;
            padding: 1rem;
            border-radius: 4px;
            margin-top: 1rem;
            font-family: monospace;
            font-size: 1.2rem;
            text-align: center;
            word-break: break-all;
        }
        
        .strength-meter {
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            margin-top: 1rem;
            overflow: hidden;
        }
        
        .strength-bar {
            height: 100%;
            width: 0%;
            transition: width 0.3s;
        }
        
        .strength-weak {
            background-color: #ff5252;
        }
        
        .strength-medium {
            background-color: #ffb74d;
        }
        
        .strength-strong {
            background-color: #4caf50;
        }
        
        .strength-very-strong {
            background-color: #2e7d32;
        }
        
        .strength-label {
            font-size: 0.9rem;
            margin-top: 0.5rem;
            text-align: right;
            font-weight: 500;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .checkbox-group input {
            margin-right: 0.5rem;
        }
        
        .history-list {
            list-style: none;
            margin-top: 1rem;
        }
        
        .history-item {
            padding: 0.5rem;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .copy-btn {
            background: none;
            border: none;
            color: var(--primary-color);
            cursor: pointer;
            font-size: 1rem;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header-container">
                <div class="logo">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Gazprom_logo.svg/1200px-Gazprom_logo.svg.png" alt="–ì–∞–∑–ø—Ä–æ–º" class="logo-img">
                    <div class="logo-text">
                        <span class="logo-title">–ì–∞–∑–ø—Ä–æ–º</span>
                        <span class="logo-subtitle">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø–∞—Ä–æ–ª–µ–π</span>
                    </div>
                </div>
                
                <nav class="main-nav">
                    <ul class="nav-list">
                        <li class="nav-item"><a href="../index.html" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li class="nav-item"><a href="index.html" class="nav-link">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</a></li>
                        <li class="nav-item"><a href="../trainers/index.html" class="nav-link">–¢—Ä–µ–Ω–∞–∂—ë—Ä—ã</a></li>
                        <li class="nav-item"><a href="../visualization/index.html" class="nav-link">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a></li>
                        <li class="nav-item"><a href="../ai-assistant/index.html" class="nav-link">–ü–æ–º–æ—â–Ω–∏–∫</a></li>
                    </ul>
                </nav>
                
                <button class="mobile-menu-btn">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
    </header>

    <main class="main">
        <section class="section-header">
            <div class="container">
                <h1 class="section-title">–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π</h1>
                <p class="section-subtitle">–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∏ —Å–∏—Å—Ç–µ–º</p>
            </div>
        </section>

        <section class="generator-section">
            <div class="container">
                <div class="generator-container">
                    <div class="generator-box">
                        <h2 class="generator-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</h2>
                        
                        <div class="form-group">
                            <label for="password-length">–î–ª–∏–Ω–∞ –ø–∞—Ä–æ–ª—è (4-64 —Å–∏–º–≤–æ–ª–∞)</label>
                            <input type="range" id="password-length" min="4" max="64" value="12">
                            <div class="form-row">
                                <span id="length-value">12</span>
                                <span>—Å–∏–º–≤–æ–ª–æ–≤</span>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏–º–≤–æ–ª—ã:</label>
                            <div class="checkbox-group">
                                <input type="checkbox" id="uppercase" checked>
                                <label for="uppercase">–ü—Ä–æ–ø–∏—Å–Ω—ã–µ –±—É–∫–≤—ã (A-Z)</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="lowercase" checked>
                                <label for="lowercase">–°—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã (a-z)</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="numbers" checked>
                                <label for="numbers">–¶–∏—Ñ—Ä—ã (0-9)</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="symbols">
                                <label for="symbols">–°–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã (!@#$%^&*)</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="ambiguous">
                                <label for="ambiguous">–ò—Å–∫–ª—é—á–∞—Ç—å –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (lI1O0)</label>
                            </div>
                        </div>
                        
                        <button id="generate-btn" class="btn btn-primary">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å</button>
                    </div>
                    
                    <div class="generator-box">
                        <h2 class="generator-title">–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
                        
                        <div class="form-row">
                            <div class="form-group" style="flex: 3;">
                                <div class="password-result" id="password-result">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å"</div>
                            </div>
                            <button id="copy-btn" class="btn btn-outline" style="flex: 1;">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                        </div>
                        
                        <div class="strength-meter">
                            <div class="strength-bar" id="strength-bar"></div>
                        </div>
                        <div class="strength-label" id="strength-label">–ù–∞–∂–º–∏—Ç–µ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å"</div>
                        
                        <div class="form-group">
                            <label for="password-hash">–•–µ—à –ø–∞—Ä–æ–ª—è (SHA-256)</label>
                            <input type="text" id="password-hash" readonly>
                        </div>
                    </div>
                    
                    <div class="generator-box">
                        <h2 class="generator-title">–ò—Å—Ç–æ—Ä–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</h2>
                        <p>–ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π (—Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ)</p>
                        
                        <ul class="history-list" id="history-list">
                            <li class="history-item">–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π</li>
                        </ul>
                        
                        <button id="clear-history" class="btn btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-container">
                <div class="footer-column">
                    <h4 class="footer-title">–ì–∞–∑–ø—Ä–æ–º</h4>
                    <p class="footer-text">–ö—Ä—É–ø–Ω–µ–π—à–∞—è –≥–∞–∑–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è –º–∏—Ä–∞, –ª–∏–¥–µ—Ä –≤ –æ–±–ª–∞—Å—Ç–∏ —Ä–∞–∑–≤–µ–¥–∫–∏, –¥–æ–±—ã—á–∏, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏, —Ö—Ä–∞–Ω–µ–Ω–∏—è, –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —É–≥–ª–µ–≤–æ–¥–æ—Ä–æ–¥–æ–≤.</p>
                </div>
                
                <div class="footer-column">
                    <h4 class="footer-title">–ù–∞–≤–∏–≥–∞—Ü–∏—è</h4>
                    <ul class="footer-links">
                        <li><a href="../index.html" class="footer-link">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="index.html" class="footer-link">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</a></li>
                        <li><a href="../trainers/index.html" class="footer-link">–¢—Ä–µ–Ω–∞–∂—ë—Ä—ã</a></li>
                        <li><a href="../visualization/index.html" class="footer-link">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4 class="footer-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
                    <ul class="footer-contacts">
                        <li class="contact-item">
                            <span class="contact-icon">üìû</span>
                            <span>+7 (495) 719-30-01</span>
                        </li>
                        <li class="contact-item">
                            <span class="contact-icon">‚úâÔ∏è</span>
                            <span>portal@gazprom.ru</span>
                        </li>
                        <li class="contact-item">
                            <span class="contact-icon">üìç</span>
                            <span>–ú–æ—Å–∫–≤–∞, —É–ª. –ù–∞–º–µ—Ç–∫–∏–Ω–∞, 16</span>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>¬© 2025 –ü–ê–û "–ì–∞–∑–ø—Ä–æ–º". –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                <div class="footer-links">
                    <a href="#" class="footer-link">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
                    <a href="#" class="footer-link">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // DOM elements
        const lengthSlider = document.getElementById('password-length');
        const lengthValue = document.getElementById('length-value');
        const uppercaseCheckbox = document.getElementById('uppercase');
        const lowercaseCheckbox = document.getElementById('lowercase');
        const numbersCheckbox = document.getElementById('numbers');
        const symbolsCheckbox = document.getElementById('symbols');
        const ambiguousCheckbox = document.getElementById('ambiguous');
        const generateBtn = document.getElementById('generate-btn');
        const passwordResult = document.getElementById('password-result');
        const copyBtn = document.getElementById('copy-btn');
        const passwordHash = document.getElementById('password-hash');
        const strengthBar = document.getElementById('strength-bar');
        const strengthLabel = document.getElementById('strength-label');
        const historyList = document.getElementById('history-list');
        const clearHistoryBtn = document.getElementById('clear-history');
        
        // Character sets
        const charSets = {
            uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
            lowercase: 'abcdefghijklmnopqrstuvwxyz',
            numbers: '0123456789',
            symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?'
        };
        
        // Ambiguous characters to exclude
        const ambiguousChars = 'lI1O0';
        
        // Update length value display
        lengthSlider.addEventListener('input', () => {
            lengthValue.textContent = lengthSlider.value;
        });
        
        // Generate password
        generateBtn.addEventListener('click', () => {
            const length = parseInt(lengthSlider.value);
            const useUppercase = uppercaseCheckbox.checked;
            const useLowercase = lowercaseCheckbox.checked;
            const useNumbers = numbersCheckbox.checked;
            const useSymbols = symbolsCheckbox.checked;
            const excludeAmbiguous = ambiguousCheckbox.checked;
            
            // Validate at least one character set is selected
            if (!useUppercase && !useLowercase && !useNumbers && !useSymbols) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –Ω–∞–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—è!');
                return;
            }
            
            // Build character pool
            let charPool = '';
            if (useUppercase) charPool += charSets.uppercase;
            if (useLowercase) charPool += charSets.lowercase;
            if (useNumbers) charPool += charSets.numbers;
            if (useSymbols) charPool += charSets.symbols;
            
            // Remove ambiguous characters if needed
            if (excludeAmbiguous) {
                charPool = charPool.split('').filter(c => !ambiguousChars.includes(c)).join('');
            }
            
            // Generate password
            let password = '';
            const crypto = window.crypto || window.msCrypto;
            const values = new Uint32Array(length);
            
            if (crypto && crypto.getRandomValues) {
                crypto.getRandomValues(values);
                for (let i = 0; i < length; i++) {
                    password += charPool[values[i] % charPool.length];
                }
            } else {
                // Fallback for browsers without crypto support
                for (let i = 0; i < length; i++) {
                    password += charPool[Math.floor(Math.random() * charPool.length)];
                }
            }
            
            // Display password
            passwordResult.textContent = password;
            
            // Calculate hash
            calculateHash(password);
            
            // Calculate strength
            calculateStrength(password);
            
            // Add to history
            addToHistory(password);
        });
        
        // Calculate password hash
        async function calculateHash(password) {
            if (window.crypto && window.crypto.subtle) {
                const encoder = new TextEncoder();
                const data = encoder.encode(password);
                const hashBuffer = await crypto.subtle.digest('SHA-256', data);
                const hashArray = Array.from(new Uint8Array(hashBuffer));
                const hashHex = hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
                passwordHash.value = hashHex;
            } else {
                passwordHash.value = 'SHA-256 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ';
            }
        }
        
        // Calculate password strength
        function calculateStrength(password) {
            let score = 0;
            const length = password.length;
            
            // Length score
            if (length > 12) score += 2;
            else if (length > 8) score += 1;
            
            // Character variety score
            const hasUppercase = /[A-Z]/.test(password);
            const hasLowercase = /[a-z]/.test(password);
            const hasNumbers = /[0-9]/.test(password);
            const hasSymbols = /[^A-Za-z0-9]/.test(password);
            
            const varietyCount = [hasUppercase, hasLowercase, hasNumbers, hasSymbols].filter(Boolean).length;
            score += varietyCount - 1;
            
            // Deductions for patterns
            if (/^[a-z]+$/.test(password)) score = Math.max(0, score - 1);
            if (/^[A-Z]+$/.test(password)) score = Math.max(0, score - 1);
            if (/^[0-9]+$/.test(password)) score = Math.max(0, score - 1);
            if (/(.)\1{2,}/.test(password)) score = Math.max(0, score - 1); // repeated chars
            
            // Calculate percentage (0-100)
            const percentage = Math.min(100, Math.max(0, score * 25));
            
            // Update strength meter
            strengthBar.style.width = `${percentage}%`;
            
            // Set strength class and label
            let strengthClass, strengthText;
            if (percentage < 25) {
                strengthClass = 'strength-weak';
                strengthText = '–°–ª–∞–±—ã–π';
            } else if (percentage < 50) {
                strengthClass = 'strength-medium';
                strengthText = '–°—Ä–µ–¥–Ω–∏–π';
            } else if (percentage < 75) {
                strengthClass = 'strength-strong';
                strengthText = '–°–∏–ª—å–Ω—ã–π';
            } else {
                strengthClass = 'strength-very-strong';
                strengthText = '–û—á–µ–Ω—å —Å–∏–ª—å–Ω—ã–π';
            }
            
            strengthBar.className = 'strength-bar ' + strengthClass;
            strengthLabel.textContent = `–°–ª–æ–∂–Ω–æ—Å—Ç—å: ${strengthText}`;
            strengthLabel.style.color = getComputedStyle(strengthBar).backgroundColor;
        }
        
        // Copy password to clipboard
        copyBtn.addEventListener('click', () => {
            const password = passwordResult.textContent;
            if (password && password !== '–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å"') {
                navigator.clipboard.writeText(password).then(() => {
                    const originalText = copyBtn.textContent;
                    copyBtn.textContent = '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!';
                    setTimeout(() => {
                        copyBtn.textContent = originalText;
                    }, 2000);
                }).catch(err => {
                    console.error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å: ', err);
                    alert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–æ–ª—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–¥–µ–ª–∏—Ç—å –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é.');
                });
            }
        });
        
        // Password history functions
        function loadHistory() {
            const history = JSON.parse(localStorage.getItem('passwordHistory') || '[]');
            renderHistory(history);
        }
        
        function addToHistory(password) {
            let history = JSON.parse(localStorage.getItem('passwordHistory') || '[]');
            
            // Remove if already exists
            history = history.filter(item => item.password !== password);
            
            // Add to beginning
            history.unshift({
                password: password,
                timestamp: new Date().toISOString()
            });
            
            // Keep only last 10
            if (history.length > 10) {
                history = history.slice(0, 10);
            }
            
            localStorage.setItem('passwordHistory', JSON.stringify(history));
            renderHistory(history);
        }
        
        function renderHistory(history) {
            if (history.length === 0) {
                historyList.innerHTML = '<li class="history-item">–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π</li>';
                return;
            }
            
            historyList.innerHTML = '';
            history.forEach(item => {
                const li = document.createElement('li');
                li.className = 'history-item';
                
                const date = new Date(item.timestamp);
                const timeString = date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                const dateString = date.toLocaleDateString();
                
                li.innerHTML = `
                    <span>${item.password}</span>
                    <div>
                        <small>${dateString} ${timeString}</small>
                        <button class="copy-btn" data-password="${item.password}">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                `;
                
                historyList.appendChild(li);
            });
            
            // Add event listeners to copy buttons
            document.querySelectorAll('.copy-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const password = e.currentTarget.getAttribute('data-password');
                    navigator.clipboard.writeText(password).then(() => {
                        e.currentTarget.innerHTML = '<i class="fas fa-check"></i>';
                        setTimeout(() => {
                            e.currentTarget.innerHTML = '<i class="fas fa-copy"></i>';
                        }, 2000);
                    });
                });
            });
        }
        
        clearHistoryBtn.addEventListener('click', () => {
            localStorage.removeItem('passwordHistory');
            renderHistory([]);
        });
        
        // Initialize
        loadHistory();
    </script>
    <script src="../script.js"></script>
</body>
</html>